<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Questions Generator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for aesthetic enhancements */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        /* Custom background gradient for the card */
        .card-bg {
            background: linear-gradient(135deg, #1f2937, #374151); /* Dark blue/gray gradient */
        }
        /* Style for the question text for readability */
        #question-display {
            min-height: 120px; /* Ensure space even with short questions */
        }
        /* Style for input elements in the dark theme */
        .generator-select {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background-color: #374151; /* Gray-700 */
            border: 1px solid #4b5563; /* Gray-600 */
            color: #ffffff;
            transition: border-color 0.15s ease-in-out, background-color 0.15s ease-in-out;
            appearance: none; /* Remove default arrow */
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3e%3cpath d='M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem; /* Make space for the custom arrow */
        }
        .generator-select:focus {
            outline: none;
            border-color: #3b82f6; /* Blue-500 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }
    </style>
</head>
<body>

    <!-- ============================================= -->
    <!-- 1. STATIC QUESTION DATA SOURCE (Seed) -->
    <!-- ============================================= -->
    <script>
        // This is the default data used if localStorage is empty.
        const DEFAULT_QUESTION_DATA = {
            'Deep Thoughts': [
                "If you could have dinner with one historical figure, who would it be and why?",
                "What’s your favorite thing you own, and why?",
                "If your life had a theme song, what would it be and why?",
                "What one photo would you send out to aliens?",
                "Can money buy you happiness?",
                "If you could only eat one thing for the rest of your life what would it be?",
                "Where's the worst place you've ever been?",
                "What New Years resolutions will you fail to keep next year?",
                "What would your so-called best friend say was your biggest flaw?",
                "How would you describe yourself to an impressionable stranger?",
                "What's your favourite smell?",
                "What have you got rid of, or sold, that you wish you hadn't?",
                "Why do round pizzas come in square boxes?",
                "Who is the first person on your hit list?",
                "What are you going to leave me in your will? Take into consideration that this will affect how I treat you for the rest of your life!",
                "Why do you think Donkey Kong is a monkey and not a donkey?",
                "Where does prune juice come from if prunes are dried plums?",
                "If we can turn peanuts into butter what other thing would you like to be turned into butter?",
                "What would be the worst Buy One Get One Free sale of all time?",
                "What's the last dream you can remember?",
                "What are you scared of?",
                "What's the difference between compulsory, mandatory, and obligatory?",
                "Is honesty the best policy?",
                "What will you win a Nobel Prize for?",
                "What word or phrase do you hate more than any other?",
                "Would you rather know what happened before the universe existed or what happens after it ends?"
                "What’s the most historic thing that has happened in your lifetime?",
                "If you could swap a TV series that went on for too long for one that was cancelled too soon, which would you choose?",
            
            ],
            'Hypothetical Scenarios': [
                "You have the power to eradicate one common annoyance forever. Which one do you choose?",
                "Would you rather be a mime or one of those people who pretends to be a statue?",
                "Would you rather co-own a car with Jimmy Carr, a lorry with Hugh Laurie, or a van with Van Morrison?",
                "What’s your survival plan during a zombie apocalypse?",
                "If you had to create an alter ego for yourself, who would it be and what would you name them?",
                "If a song played every time you entered a room, what would it be?",
                "If you had the planet to yourself, where would you live?",
                "Which celebrity will play you in the film about your life?",
                "If you could have a fifth season, what would it be, and when would you have it?",
                "Which country would you like to be the ruler of?",
                "Would you rather have wooden teeth, or a wooden leg?",
                "What would you like your pet to sound like if it could talk?",
                "If you could jump into a pool of something, what would it be?",
                "If you could be part Grufallo, would you have claws, fangs, horns, or spikes?",
                "What's the worst present you've ever recieved?",
                "If you could hypnotise someone, who would it be, and what would you make them do?",
                "What's the first thing you'd do if you became a god?",
                "Which part of your body would you cybernetically enhance?",
                "Which one of the people in this room would you like in your gang during a zombie apocalypse?",
                "If you were an action figure, what accessories would you be sold with?",
                "If you could merge two different animals to create a third animal, what would you choose, and what would its major characteristics be?",
                "Which fictional character would be the most annoying in real life?",
                "Which two public figures would you like to see fight each other, and which one would win?",
                "If you could hypnotise someone, who would it be, and what would you make them do?",
                "If magic was real, what spell would you try to learn first?",
                "If you built a themed hotel, what would the theme be and what would the rooms look like?",
                "If you had to disappear and start a whole new life, what would you want your new life to look like?",
                
            ],
            'Trivial & Fun': [
                "What's the strangest food combination you secretly enjoy?",
                "What is your go-to karaoke song (even if you've never sung it publicly)?",
                "Which is your favourite relative or sibling?",
                "What's your favourite collective noun?",
                "What bin do you need to put out this week?",
                "Who is the best super villain of all time?",
                "What's your favourite collective noun?",
                "Who's your favourite Alan?",
                "What song would you like to replace our national anthem with?",
                "What is your favourite anagram?",
                "Have you ever had anything removed from your body?",
                "How do you feel about marmite?",
                "Have you ever pretended to be your own twin?",
                "What would your wrestling name be?",
                "What's your favourite long red thing?",
                "What film or story would you like to see remade by the muppets?",
                "What do you think the tooth fairy is doing with all those teeth?",
                "What's your favourite round thing?",
                "How do you decide when it's time to retire a pair of pants?",
                "What does Father Christmas need to do to modernize?",
                "What would be the funniest thing to fill a pi&ntilde;ata with?",
                "What fictional character have you had a crush on, other than Mr Darcy?",
                "What's your favourite flat thing?",
                "If you were given one extra hour a day, how much more alcohol would you drink?",
                "What's your worst fashion decision?",
                "If you had to be a celebrity's pet, what would you be, and who would you belong to?",
                "If you could have any animal as a pet what would it be?",
                "What's the worst thing you've ever eaten?",
                "What's the strangest thing you've found in the fridge?",
                "What do you own that you have no idea how to use?",
                "What would you like rainbows to smell of?",
                "What would you name your boat, if you had one?",
                "What's the largest animal you think you can beat in a fight?",
                "Who would you most like to punch in the face?",
                "Have you got an imaginary friend?",
                "Why do you think the word gullible isn't in the dictionary?",
                "Would you consider having sex with an alien?",
                "Why is drowsiness listed as a side effect for sleeping pills?",
                "What should we call a female Daddy Long Legs?",
                "What should we call a male ladybird?",
                "Would you prefer a cruise with Tom Cruise or a walking holiday with Christopher Walken?",
                "What sport would be the funniest to add a mandatory amount of alcohol to?",
                "What would be the hat to end all hats? What could you wear on your head that would make people stop what they are doing and stare in awe and amazement?",
                "What would be the coolest animal to scale up to the size of a horse?",
                "What's your favourite smell?",
                "Have you got a favourite Venn diagram?",
                "Who's your least favourite celebrity or politician?",
                "What obstacles would be included in the World’s most amazing obstacle course?",
                "What’s the most ridiculous thing you have bought?",
                "If you could see 3 stats about any person you looked at, what three stats would you want to know?",
                "What movie's plot changes entirely only by changing one letter in the title?",
                "If you had a giraffe that you needed to hide, where would you hide it?",
                "What's the best thing you've ever found?",
                "What's the best free thing that you get?",
                "Which non-potato crisp is the best?",
                "Who is the first person you remember fancying?",
                "Which Quality Street chocolate would you abolish, and what would you replace it with?",

            ]
        };
        
        // This will hold the live data, loaded from localStorage
        window.questionData = {}; 
    </script>


    <!-- ============================================= -->
    <!-- 2. APPLICATION LOGIC AND LOCALSTORAGE -->
    <!-- ============================================= -->
    <script>
        // --- Global Config and State Variables ---
        const STORAGE_KEY = 'emergencyQuestionsData';
        const ALL_CATEGORIES_KEY = 'ALL_QUESTIONS_MODE'; 

        // --- Global DOM and State Variables ---
        let categorySelect, questionText, nextButton, loadingStatus;
        let statusMessage;

        let currentCategory = '';
        let availableQuestions = [];


        // --- Data Persistence Functions (localStorage) ---

        function loadDataFromStorage() {
            const storedData = localStorage.getItem(STORAGE_KEY);
            if (storedData) {
                try {
                    window.questionData = JSON.parse(storedData);
                    statusMessage.textContent = "Data loaded successfully from local storage.";
                } catch (e) {
                    console.error("Error parsing stored data. Resetting to default.", e);
                    window.questionData = DEFAULT_QUESTION_DATA;
                    saveDataToStorage(); // Save default data back
                }
            } else {
                window.questionData = DEFAULT_QUESTION_DATA;
                saveDataToStorage(); // Initialize storage with default data
                statusMessage.textContent = "Initialized with default questions.";
            }
            // Ensure status message disappears
            setTimeout(() => { statusMessage.textContent = ""; }, 3000);
        }

        function saveDataToStorage() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(window.questionData));
            } catch (e) {
                console.error("Could not save data to local storage.", e);
            }
        }
        
        // --- Generator Logic ---

        function populateCategories() {
            const targetSelect = categorySelect;
            if (!targetSelect) return; 

            const categories = Object.keys(window.questionData).sort();
            
            targetSelect.innerHTML = '';
            
            // Default/Placeholder Option
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = categories.length > 0 ? '--- Choose a Category ---' : '--- No Questions Available ---';
            defaultOption.disabled = true;
            defaultOption.selected = true;
            targetSelect.appendChild(defaultOption);

            // Add the special "All Questions" option
            if (categories.length > 0) {
                const allOption = document.createElement('option');
                allOption.value = ALL_CATEGORIES_KEY;
                allOption.textContent = '⚡ All Questions (Random)';
                allOption.classList.add('font-bold', 'text-yellow-400', 'bg-gray-800');
                targetSelect.appendChild(allOption);
            }

            // Add standard categories
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                targetSelect.appendChild(option);
            });
            
            loadingStatus.classList.add('hidden');
        }

        function selectCategory(categoryName, resetQuestion = true) {
            currentCategory = categoryName;
            
            if (categoryName === ALL_CATEGORIES_KEY) {
                // AGGREGATION LOGIC: Combine all questions from all categories
                availableQuestions = Object.values(window.questionData).flat();
            } else {
                // Standard category selection
                availableQuestions = window.questionData[categoryName] || [];
            }
            
            if (availableQuestions.length > 0) {
                nextButton.disabled = false;
                if (resetQuestion) {
                    displayRandomQuestion();
                }
            } else {
                questionText.textContent = "No questions found for this category. Please select another.";
                nextButton.disabled = true;
            }
        }

        function displayRandomQuestion() {
            if (availableQuestions.length === 0) {
                questionText.textContent = "Please select a category first!";
                nextButton.disabled = true;
                return;
            }

            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            const question = availableQuestions[randomIndex];

            questionText.classList.remove('opacity-100');
            questionText.classList.add('opacity-0');

            setTimeout(() => {
                questionText.textContent = question;
                questionText.classList.remove('opacity-0');
                questionText.classList.add('opacity-100');
            }, 100);
        }

        // --- Initialization ---

        window.onload = function() {
            // 1. Assign Global DOM elements
            statusMessage = document.getElementById('status-message');
            categorySelect = document.getElementById('category-select');
            questionText = document.getElementById('question-text');
            nextButton = document.getElementById('next-button');
            loadingStatus = document.getElementById('loading-status');
            
            // 2. Load data and initialize generator UI
            loadDataFromStorage();
            populateCategories(); 
            
            // Initial view setup
            nextButton.disabled = true;
            questionText.textContent = "Select a category to start generating questions!";
            loadingStatus.classList.add('hidden'); 

            // 3. Attach Event Listeners
            categorySelect.addEventListener('change', (event) => selectCategory(event.target.value));
            nextButton.addEventListener('click', displayRandomQuestion);
        };
    </script>

    <div id="app" class="w-full max-w-lg mx-auto relative">
        
        <!-- === Status Message Bar (Global) === -->
        <div id="status-message" class="text-center text-sm text-green-400 font-medium mb-4 h-5"></div>
        
        <!-- === View Container === -->
        <div class="card-bg p-8 rounded-2xl shadow-2xl text-white">
            
            <!-- === Generator View (The only view) === -->
            <div id="generator-view">
                <!-- TITLE HEADER -->
                <header class="mb-6 text-center">
                    <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Emergency Questions</h1>
                    <p class="text-gray-300 mt-2 text-sm sm:text-base">Break the ice. Spark a conversation.</p>
                </header>
                <!-- END TITLE HEADER -->
                
                <p id="loading-status" class="text-center text-sm text-yellow-500 mb-4">Loading static data...</p>

                <!-- Category Selector Dropdown -->
                <div class="mb-6">
                    <label for="category-select" class="block text-sm font-medium mb-2 text-gray-200">Select Category:</label>
                    <select id="category-select" class="generator-select text-white focus:ring-blue-500 focus:border-blue-500 cursor-pointer shadow-inner transition duration-150">
                        <option value="">--- Loading Categories ---</option>
                    </select>
                </div>

                <!-- Question Display Area -->
                <div id="question-display" class="bg-gray-800 p-6 rounded-xl shadow-inner mb-8 flex items-center justify-center text-center">
                    <p id="question-text" class="text-xl sm:text-2xl font-semibold text-yellow-300 transition duration-300 ease-in-out">
                        Ready to go!
                    </p>
                </div>

                <!-- Action Button -->
                <button id="next-button" 
                        class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg 
                            transform transition duration-150 hover:scale-[1.03] active:scale-95 
                            focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50"
                        disabled>
                    Next Question
                </button>
            </div>
        </div>
        
    </div>
</body>
</html>
